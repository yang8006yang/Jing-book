<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JS Lv.2</title>
    <link rel="stylesheet" href="../class/stylesheet.css">
    <style>
        .subtitle{
            font-size: 24px;
            font-weight: bold;
            background-color: rgb(175, 221, 200);
            padding: 0.8rem;
            border-left: 1px solid black;
        }
    </style>
</head>

<body>
    <nav id="nav">
        <div>
            <a class="nav-left" href="../index.html"><img src="../img/logomy.png" alt="" class="logomy">JING HAN</a>
            <span class="navlist">2022/09/21 ~ NOW </span>
            <button class="navMore" id="navMore">=</button>
        </div>
    </nav>
    <div class="mycontainer">
        <aside>
            <div class="list">
                <ul>
                    <li><a href="#bom">BOM</a></li>
                    <li><a href="#dom">DOM</a></li>
                    <li><a href="#ajax">AJAX</a></li>
                </ul>
            </div>
        </aside>
        <main>
            <section>
                <h3 id="bom">BOM</h3>
                <p>Browser Object Model</p>
                <pre>
                       window
    ______________________|________________________
    |        |        |       |          |        |
document  history  screen  navigator  location  popup
                </pre>
                <p>*navigator : 使用者資訊</p>
            </section>
            <section>
                <h3 id="dom">DOM</h3>
                <p>Window Object Model</p>
                <pre>
                     window
                       |
                    document
            ___________|_____________
            |                       |
          head                     body
     _______|______         ________|________
     |            |         |               |
    title       meta       h1              div
                                            |
                                            p</pre>
                <div>
                    *document 是 window下的document
                </div>
                <ul>
                    <li>取得元素
                        <table>
                            <tr>
                                <td colspan="2">const id = document.getElementBy??("??");</td>
                            </tr>
                            <tr>
                                <td>byId</td>
                                <td>
                                    抓id相同的
                                </td>
                            </tr>
                            <tr>
                                <td>ByTagName</td>
                                <td>抓同種標籤，得到會是陣列</td>
                            </tr>
                            <tr>
                                <td>ByClassName</td>
                                <td>抓同種class的元素，得到會是陣列 ('a b')=>抓class為a和b的
                            </tr>
                            <tr>
                                <td>id.parentElement</td>
                                <td>抓取上一層元素</td>
                            </tr>
                            <tr>
                                <td>id.children</td>
                                <td>抓取下一層所有元素</td>
                            </tr>
                            <tr>
                                <td>id.first/lastChild</td>
                                <td>可以抓取下一層第一個/最後一個元素</td>
                            </tr>
                            <tr>
                                <td>previous/nextElementSibling</td>
                                <td>可以抓取同一層的上/下一個元素</td>
                            </tr>
                            <tr>
                                <td colspan="2">const id = document.querySelector(".myClass"); :第一個符合的</td>
                            </tr>
                            <tr>
                                <td colspan="2">const id = document.querySelectorAll("#myId"); : 全部 結果是陣列</td>
                            </tr>
                        </table>
                        <p>*可結合使用 ex. document.getElementByTagName("h1").getElementByClassName("class")<br>
                            =>取所有h1標籤裡class是class的元素
                        </p>

                    </li>

                    <li>修改元素</li>
                    <ul>
                        <li>取得屬性名
                            <table>
                                <tr>
                                    <td>文字</td>
                                    <td>.textContent .innerHTML .innerText</td>
                                </tr>
                                <tr>
                                    <td>CSS</td>
                                    <td>.style.backgroundColor (改駝峰命名)</td>
                                </tr>
                            </table>
                        </li>
                        <li>修改屬性 : .setAttribute('href','www.google.com')</li>
                        <li>取得屬性 : .getAttribute("href");</li>
                        <li>CLASS
                            <table>

                                <tr>
                                    <td>取得class
                                    <td>.className</td>
                                </tr>

                                <tr>
                                    <td>新增class</td>
                                    <td>.classList.add()</td>
                                </tr>
                                <tr>
                                    <td>刪除class</td>
                                    <td>.classList.remove()</td>
                                </tr>
                                <tr>
                                    <td>取代class</td>
                                    <td>.classList.replace()</td>
                                </tr>
                                <tr>
                                    <td>關閉class</td>
                                    <td>.classList.toggle()</td>
                                </tr>
                            </table>
                        </li>
                    </ul>
                </ul>
            </section>
            <section>
                <h3 id="event">行內事件</h3>
                <table>
                    <tr class="tdHeader">
                        <td>行內事件</td>
                        <td>說明</td>
                    </tr>
                    <tr>
                        <td>onclick</td>
                        <td>滑鼠點擊</td>
                    </tr>
                    <tr>
                        <td>onkeydown</td>
                        <td>鍵盤鍵按下</td>
                    </tr>
                    <tr>
                        <td>onkeyup</td>
                        <td>鍵盤鍵放開</td>
                    </tr>
                    <tr>
                        <td>onmouseover</td>
                        <td>hover</td>
                    </tr>
                    <tr>
                        <td>onmouseout</td>
                        <td>滑鼠離開</td>
                    </tr>
                    <tr>
                        <td>onchange</td>
                        <td>改變時</td>
                    </tr>
                    <tr>
                        <td>onfocus</td>
                        <td>點到輸入欄</td>
                    </tr>
                    <tr>
                        <td>onblur</td>
                        <td>點輸入欄外</td>
                    </tr>
                    <tr>
                        <td>oninput</td>
                        <td>表單欄位輸入時</td>
                    </tr>
                    <tr>
                        <td>onsubmit</td>
                        <td>表單送出時</td>
                    </tr>
                    <tr>
                        <td>oncpoy</td>
                        <td>複製時</td>
                    </tr>
                    <tr>
                        <td colspan="2">此處this代表的是觸發事件的元素</td>
                    </tr>
                </table>
            </section>
            <section>
                <h3 id="ajax">AJAX / XML</h3>
                <ul>
                    <li>AJAX</li>
                    <p>Asynchronous JavaScript and XML</p>
                    <p>一種用於創建高效、可交互的網頁應用程序的技術。Ajax 允許網頁透過 HTTP 請求向伺服器發送資料，並在<mark>不重新載入整個頁面的情況下更新頁面的部分內容</mark>。<br>Ajax 使用 JavaScript 向伺服器發送請求，並使用 XMLHttpRequest 對象接收伺服器的響應。</p>
                    <li>XML</li>
                    <p>Extensible Markup Language，可擴展標記語言</p>
                    <p>是一種文本格式，用於在網際網路上傳輸和存儲資料。<br>要特點是它是可擴展的，即它可以根據用戶的需求自定義新的標記。它也可以與其他標記語言（如 HTML）一起使用。</p>
                </ul>
                <p style="float: right;">from : chatGTP</p>
                <br><br>
                <p>想使用XHR / AJAX技術有以下方法 :</p>
                <div class="subtitle">XMLHttpRequest</div>
                使用 XHR 物件可以在網頁上讀取遠端的 JSON 資料(古早方法)(後來又推出JSON格式，資料量比XML小，解析和應用也較方便，因此近年來的資料傳輸逐漸以JSON來取代XML)
                <pre class="codePre">
//宣告物件
var xhr = new XMLHttpRequest;

//建立設定
xhr.open(
    Method, //get,post,put,patch,delete (格式)
    URL,
    async //同步與非同步 ture、async(非同步)
    );

//設置請求表單
xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded")
(form 傳統表單輸入)
//設置請求json
xhr.setRequestHeader("Content-Type","application/json")

//監聽事件，使回應完成時能回調函式處理回應 (非同步時需要)
xhr.onload=function(){  
    var type=xhr.getResponseHeader("Content-Type");
    var status=xhr.status
    // 可用xhr.status判斷HTTP連線狀態(ex.200 . 404)
    var response=xhr.responseText
    if(xhr.status == 200){
    document.write(response)
    }eles{
    console.log('資料錯誤');
    }
}

//執行請求及傳送內容
//表單資料
let context="name=john&age=32";

//json資料
let context=JSON.stringify({name:'john',age:32})

//執行ajax請求
//有傳送資料或post時
xhr.send(context);

//只是請求資料時
xhr.send();
                </pre>
                <div class="subtitle">Fetch</div>
                特色在於使用 Promise 作回應
<pre class="codePre">
//執行請求及傳送內容
//表單資料
let body="name=john&age=32";
    
 //json資料
let body=JSON.stringify({name:'john',age:32})
//body 將 json 轉字串送出

fetch('url',{method,body,headers:{'Content-Type':'application/x-www-form-urlencoded'}})
// method : GET, POST, PUT, DELETE, etc
// headers{'Content-Type': 'application/json'}:headers 加入 json 格式

    .then((res)=>{
        // 可以透過 blob(), json(), text(),arrayBuffer(), formData() 轉成可用的資訊
        //回傳是josn時
        return response.json()
    
        //回傳是text時
        return response.text()
    })
    .then((data)=>{
        console.log(date);
    })
    .catch(function(err){
        //error
    })
</pre>
<div class="subtitle">JQuery</div>
<pre class="codePre">
//$.ajax方法
$.ajax({
    type:get/post/patch/delete/update…,
    url:"http://.....",
    success: (callback),
    error: (callback),
    data:{json/xml/string},
    complete: (callback)
})

//$.get方法
$.get(url,data,callback)

//$.post方法
$.post(url,data,callback)

//().load()方法
$(selector).load(url)
</pre>
<div class="subtitle">axios</div>
函式庫相較jQuery小很多，引 : src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"
<pre class="codePre">
    
axios.get(url)
.then(function(response){

//處理回應
console.log(response.data);
//抓回來的 JSON 資料
console.log(response.status);
//回傳的狀態碼
    
})
.catch(function(err){
//error
    
})
</pre>
<div class="subtitle">四種常見的 POST 請求 content-type</div>
<ul>
    <li>application/x-www-form-urlencoded :form 表單 </li>
    <li>application/json : json</li>
    <li>multipart/form-data : 檔案、圖片、影片，搭配enctype 屬性 multipart/form-data </li>
    <li>text/plain :純文本格式</li>
</ul>
            </section>
        </main>
    </div>
    <footer>
        <hr>
        <a href="#">TOP</a>
        <a href="./JSontents.html">BACK</a>
    </footer>
    <a href="#">
        <div class="topcircle gotopP">
        </div>
        <div class="gotopP"><img src="../img/32213.png" alt="" class="gotoparrow"></div>
    </a>
</body>

</html>